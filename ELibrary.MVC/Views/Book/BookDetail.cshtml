@model BookDetailAndReviewViewModel
@{
    Layout = "_HomeLayout";
    ViewBag.Title = "Book Detail";

    var book = Model.BookDetailViewModel;
    var review = Model.ReviewViewModel;
    var addBook = Model.AddReviewModel;
    addBook.BookId = book.Id;
    var rate = Model.BookDetailViewModel.Rate.Sum(x => x.Rate) / Model.BookDetailViewModel.Rate.Count();

}

<div class="container px-6 py-10 mx-auto md:py-16 font-sans ...">
    <div>
        <div class="grid gap-8 grid-cols-4">
            <div class="col-span-1 ml-0">
                <div class="aspect-h-12 aspect-w-8 z-0 w-full">
                    <img src="@Model.BookDetailViewModel.PhotoUrl"
                         alt="car photo" class="object-center object-cover" />
                </div>
            </div>
            <div class="col-span-3">
                <div class="">
                    <h1 class="text-2xl text-md tracking-wide text-gray-900 md:text-4xl">
                        @Model.BookDetailViewModel.Title
                    </h1>
                    <div class="">
                        <div class="mt-2 text-sm">
                            <span class="text-gray-400">
                                Available Copies
                            </span>
                            <span class="text-g-900 mr-5 text-lg font-bold">
                                @Model.BookDetailViewModel.AvailableCopies
                            </span>
                            <span class="text-gray-400">
                                Copies in Library
                            </span>
                            <span class="text-g-900 mr-5 text-lg font-bold">
                                @Model.BookDetailViewModel.Copies
                            </span>
                            <span class="text-gray-400">
                                Copies Taken out
                            </span>
                            <span class="text-g-900 mr-5 text-lg font-bold">
                                5
                            </span>

                        </div>

                        <div class="mt-2">
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Genre: </span>
                                <span class="font-semibold">Business & Economics</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Arthor: </span>
                                <span class="font-semibold">Nitin Seth</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Language: </span>
                                <span class="font-semibold">English</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Publisher: </span>
                                <span class="font-semibold">Penguin Random House India Pvt. Ltd</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Published Date: </span>
                                <span class="font-semibold">24 June 2020</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Added to Library: </span>
                                <span class="font-semibold">10 July 2020</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">ISBN : </span>
                                <span class="font-semibold">234567543576546</span>
                            </div>
                            <div class="mb-4">
                                <span class="text-sm text-gray-400">Pages: </span>
                                <span class="font-semibold">544</span>
                            </div>

                        </div>

                        <div class="mt-2">
                            <div class="grid gap-2 grid-cols-8">
                                <div class="col-span-1">Description: </div>
                                <div class="col-span-7">
                                    <div class="mb-9">
                                        <p class="overflow-ellipsis overflow-hidden ... leading-7">
                                            @Model.BookDetailViewModel.Description
                                        </p>
                                    </div>
                                    <div class="mt-2">
                                        <button class="btn btn-primary">Read Now</button>
                                        <button class="btn btn-outline-primary"><i class="fa fa-download"></i> Download</button>


                                    </div>
                                    <div class="p-4 flex ">

                                        <span>
                                            @for (int i = 1; i <= rate; i++)
                                            {
                                                <i class="fas fa-star" style="color:orange;font-size:20px"></i>
                                            }
                                            @for (int j = rate + 1; j <= 5; j++)
                                            {
                                                <i class="fas fa-star" style="font-size:20px"></i>
                                            }




                                        </span>

                                        <span class="ml-2 text-gray-800 text-2xl">Rating</span>
                                    </div>


                                    <div>
                                        <h3 class="mb-10 text-2xl font-bold">Reviews</h3>
                                    </div>

                                    @foreach (var item in @Model.BookDetailViewModel.Reviews)
                                    {
                                        <div>
                                            <h5 class="mb-2  text-lg font-bold">@item.Subject</h5>
                                            <p>@item.Body</p>
                                        </div>
                                    }

                                    <button class="mt-3 modal-open bg-transparent border border-gray-500 hover:border-indigo-500 text-gray-500 hover:text-indigo-500 font-bold py-2 px-4 rounded-full">Make Review</button>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>


            </div>
        </div>


    </div>


    <partial name="_AddReview" model="@addBook" />


</div>